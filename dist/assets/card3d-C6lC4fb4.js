import{j as e,C as J,e as O,r as s,u as U,b as W}from"./react-three-fiber-DGkkOkz2.js";import{c as r,M as A,aQ as H,J as K}from"./three-Buekyn-Z.js";import{P as N,u as b,a as Q,R as h,B as w,C as V}from"./react-three-rapier-Dr0kQKqX.js";import{E as q,L as f,u as S,a as D,M as X,b as Y}from"./react-three-drei-C3tNxm-S.js";O({MeshLineGeometry:X,MeshLineMaterial:Y});S.preload("/lailaolab-tag.glb",!1,!1);D.preload("/lailaolab-clamp-black.jpeg");function re(){return e.jsxs(J,{camera:{position:[0,0,10],fov:20},style:{width:"100%",height:"100%"},children:[e.jsx("ambientLight",{intensity:Math.PI}),e.jsx(N,{interpolate:!0,gravity:[0,-40,0],timeStep:1/60,children:e.jsx(Z,{})}),e.jsxs(q,{blur:.75,children:[e.jsx(f,{intensity:2,color:"white",position:[0,-1,5],rotation:[0,0,Math.PI/3],scale:[100,.1,1]}),e.jsx(f,{intensity:3,color:"white",position:[-1,-1,1],rotation:[0,0,Math.PI/3],scale:[100,.1,1]}),e.jsx(f,{intensity:3,color:"white",position:[1,1,1],rotation:[0,0,Math.PI/3],scale:[100,.1,1]}),e.jsx(f,{intensity:10,color:"white",position:[-10,0,14],rotation:[0,Math.PI/2,Math.PI/3],scale:[100,10,1]})]})]})}function Z({maxSpeed:E=50,minSpeed:P=10}){const M=s.useRef(null),u=s.useRef(null),l=s.useRef(null),c=s.useRef(null),m=s.useRef(null),o=s.useRef(null),a=new r,g=new r,v=new r,R=new r,d={type:"dynamic",canSleep:!0,colliders:!1,angularDamping:2,linearDamping:2},{nodes:y,materials:x}=S("/lailaolab-tag.glb");for(const t of Object.values(y))t instanceof A&&console.log(t.geometry,t.material);const j=D("/lailaolab-clamp-black.jpeg"),{width:k,height:B}=U(t=>t.size),[p]=s.useState(()=>new H([new r,new r,new r,new r])),[i,C]=s.useState(!1),[I,L]=s.useState(!1);return b(u,l,[[0,0,0],[0,0,0],1]),b(l,c,[[0,0,0],[0,0,0],1]),b(c,m,[[0,0,0],[0,0,0],1]),Q(m,o,[[0,0,0],[0,1.45,0]]),s.useEffect(()=>(I&&(document.body.style.cursor=i?"grabbing":"grab"),()=>{document.body.style.cursor="auto"}),[I,i]),W((t,F)=>{var T,z;if(i instanceof r){a.set(t.pointer.x,t.pointer.y,.5).unproject(t.camera),R.copy(a).sub(t.camera.position).normalize(),a.add(R.multiplyScalar(t.camera.position.length()));for(const n of[l,c,m,o,u])(T=n.current)==null||T.wakeUp();(z=o.current)==null||z.setNextKinematicTranslation({x:a.x-i.x,y:a.y-i.y,z:a.z-i.z})}if(u.current){for(const n of[l,c]){n.current.lerped||(n.current.lerped=new r().copy(n.current.translation()));const G=Math.max(.1,Math.min(1,n.current.lerped.distanceTo(n.current.translation())));n.current.lerped.lerp(n.current.translation(),F*(P+G*(E-P)))}p.points[0].copy(m.current.translation()),p.points[1].copy(c.current.lerped),p.points[2].copy(l.current.lerped),p.points[3].copy(u.current.translation()),M.current.geometry.setPoints(p.getPoints(32)),g.copy(o.current.angvel()),v.copy(o.current.rotation()),o.current.setAngvel({x:g.x,y:g.y-v.y*.25,z:g.z})}}),p.curveType="chordal",j.wrapS=j.wrapT=K,e.jsxs(e.Fragment,{children:[e.jsxs("group",{position:[0,4,0],children:[e.jsx(h,{ref:u,...d,type:"fixed"}),e.jsx(h,{position:[.5,0,0],ref:l,...d,children:e.jsx(w,{args:[.1]})}),e.jsx(h,{position:[1,0,0],ref:c,...d,children:e.jsx(w,{args:[.1]})}),e.jsx(h,{position:[1.5,0,0],ref:m,...d,children:e.jsx(w,{args:[.1]})}),e.jsxs(h,{position:[2,0,0],ref:o,...d,type:i?"kinematicPosition":"dynamic",children:[e.jsx(V,{args:[.8,1.125,.01]}),e.jsxs("group",{scale:2.25,position:[0,-1.2,-.05],onPointerOver:()=>L(!0),onPointerOut:()=>L(!1),onPointerUp:t=>{t.target.releasePointerCapture(t.pointerId),C(!1)},onPointerDown:t=>{t.target.setPointerCapture(t.pointerId),C(new r().copy(t.point).sub(a.copy(o.current.translation())))},children:[e.jsx("mesh",{geometry:y.card.geometry,children:e.jsx("meshPhysicalMaterial",{map:x.base.map,"map-anisotropy":16,clearcoat:1,clearcoatRoughness:.15,roughness:.3,metalness:.5})}),e.jsx("mesh",{geometry:y.clip.geometry,material:x.metal,"material-roughness":.3}),e.jsx("mesh",{geometry:y.clamp.geometry,material:x.metal})]})]})]}),e.jsxs("mesh",{ref:M,children:[e.jsx("meshLineGeometry",{}),e.jsx("meshLineMaterial",{color:"white",depthTest:!1,resolution:[k,B],useMap:!0,map:j,repeat:[-3,1],lineWidth:1})]})]})}export{re as default};
//# sourceMappingURL=card3d-C6lC4fb4.js.map
